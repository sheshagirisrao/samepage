<html>

<head>
    <title>SamePage TM</title>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="css/header.css">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="js/authenticate.js"></script>
<script>

  function getStartValue(obj,type){
    if(type=='meal'){
      return obj.mealstartcredit;
    }
    if(type=="food"){
      return obj.foodstartcredit;
    }
    if(type=="transport"){
      if(!($.cookie('transportstartcredit') ===undefined)){
        return $.cookie('transportstartcredit');
     }else{
        $.cookie('transportstartcredit', obj.transportstartcredit);
        return obj.transportstartcredit;
      }
    }
    if(type=="pest"){
      return obj.peststartcredit;
    }
    if(type=="indoor"){
      return obj.indoorstartcredit;
    }
    if(type=="social"){
      return obj.socialstartcredit;
    }
    if(type=="home"){
      return obj.homestartcredit;
    }
  }
  function getUsedValue(obj,type){
    if(type=='meal'){
      return obj.mealusedcredit;
    }
    if(type=="food"){
      return obj.foodusedcredit;
    }
    if(type=="transport"){
      if(!($.cookie('transportusedcredit') ===undefined)){
        return $.cookie('transportusedcredit');
     }else{
        $.cookie('transportusedcredit', obj.transportusedcredit);
        return obj.transportusedcredit;
      }
    }
    if(type=="pest"){
      return obj.pestusedcredit;
    }
    if(type=="indoor"){
      return obj.indoorusedcredit;
    }
    if(type=="social"){
      return obj.socialusedcredit;
    }
    if(type=="home"){
      return obj.homeusedcredit;
    }
  }

  function showCredits(){ 
          var creditType = $('#creditType').val();
          $.getJSON("/data/credit_balance.json", function(json) {
          var objCredit = json.members[0];
          var startCredit = getStartValue(objCredit,creditType);
          var usedCredit = getUsedValue(objCredit,creditType)
          if(creditType=='transport'){
            usedCredit=parseInt(usedCredit)+1;
          }
          var balanceCredit=startCredit-usedCredit;
          $('#startCredit').val(startCredit);
          $('#usedCredit').val(usedCredit);
          $('#balanceCredit').val(balanceCredit);
   });
  }
  
  function assignCBO(cbo,id){
    if(id=='e'){
      if(cbo=="Assign CBO"){
        $.cookie('actionFoodNotify', "remove");
      }else{
        $.cookie('actionFoodNotify', "add");
      }
      $("#mealModelClose").click();
      $("e").html("<a href=\"#\" class=\"text-success\" data-toggle=\"modal\" data-target=\"#foodModal\" onclick=\"javascript:notification()\">"+cbo+"</a>");
    }else{
      if(cbo=="Assign CBO"){
        $.cookie('actionTransportNotify', "remove");
        $(".replace").html("");
      }else{
        $.cookie('actionTransportNotify', "add");
        $.cookie('actionTransportName', cbo);
        var value=  "<th scope=\"row\"><button class=\"btn btn-link\" onclick=\"javascript:assignCBO('Assign CBO','f')\">Remove Assignment</button></th>";
        $(".replace").append(value);
      }
      $("f").html("<a href=\"#\" class=\"text-success\" data-toggle=\"modal\" data-target=\"#transportModal\" onclick=\"javascript:notification()\">"+cbo+"</a>");
      $("#transportModelClose").click();
    }
  }

</script>

</head>

<body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <a href="healthPlanHome.html">
                    <font class="navbar-brand"> SAMEPAGE</font>
                    <font class="navbar-subbrand">TM</font>
                </a>
            </div>
        </div>
    </nav>

    <div class="container">
            <div class="row pt-5">
                <div class="col-md-12">
                    <h2>Catherine Henders RN - Member view</h2>
                    <hr>
                </div>
            </div>
    </div>    

    <div class="container">
            <div class="row">
                    <div class="col-3">
                      <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                        <a class="nav-link active pt-4" id="v-pills-photo-tab" data-toggle="pill" href="#v-pills-photo" role="tab" aria-controls="v-pills-photo" aria-selected="true">MEMBER PROFILE</a>
                        <a class="nav-link pt-4" id="v-pills-messages-tab" data-toggle="pill" href="#v-pills-messages" role="tab" aria-controls="v-pills-messages" aria-selected="false">BENEFITS</a>
                        <a class="nav-link pt-4" id="v-pills-settings-tab" data-toggle="pill" href="#v-pills-settings" role="tab" aria-controls="v-pills-settings" aria-selected="false">BENEFITS USAGE HISTORY</a>
                        <a class="nav-link pt-4" id="v-pills-settings-tab" data-toggle="pill" href="#v-pills-cbo" role="tab" aria-controls="v-pills-cbo" aria-selected="false">CBO</a>
                      </div>
                    </div>
                    <div class="col-9">
                      <div class="tab-content" id="v-pills-tabContent">
                          <div class="tab-pane fade show active" id="v-pills-photo" role="tabpanel" aria-labelledby="v-pills-photo-tab">
                            <div class="container">
                              <div class="row">
                                <div class="col-md-3">
                                         <img class="img-thumbnail" src="images/60-year-old-man.jpg">
                                </div>
                                <div class="col-md-9">
                                    <div class="row">
                                      <div class="col-md-8">
                                          <label class="text-secondary font-weight-bold">MEMBERID : 2347047760</label>
                                      </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-8">
                                            <label class="text-secondary font-weight-bold">AGE : 78</label>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-8">
                                            <label class="text-secondary font-weight-bold">PHONE : 518-231-9000</label>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-8">
                                            <label class="text-secondary font-weight-bold">EMAIL : John.Smith@gmail.com</label>
                                        </div>
                                     </div>
                                     <div class="row">
                                        <div class="col-md-8">
                                            <label class="text-secondary font-weight-bold">ADDRESS : 125 Ruby Ln,Apt # 301, Albany NY 12204</label>
                                        </div>
                                     </div>
                                     <div class="row">
                                        <div class="col-md-8">
                                            <label class="text-secondary font-weight-bold">PLAN ID : H8000_002</label>
                                        </div>
                                     </div>
                                     <div class="row">
                                        <div class="col-md-8">
                                            <label class="text-secondary font-weight-bold">PCP : Dr.Alec Binder,Community Care Physicians, Ph:518-299-1001</label>
                                        </div>
                                     </div>
                                     <div class="row">
                                        <div class="col-md-8">
                                            <label class="text-secondary font-weight-bold">DISABLED : Yes</label>
                                        </div>
                                     </div>
                                     <div class="row">
                                        <div class="col-md-8">
                                            <label class="text-secondary font-weight-bold">DUAL : No</label>
                                        </div>
                                     </div>
                                </div>
                              </div>
                              <hr>
                              <div class="row">
                                  <table class="table table-bordered">
                                      <thead>
                                        <tr>
                                          <th class="text-dark font-weight-bold">Benefits</th>
                                          <th class="text-success">Meal</th>
                                          <th class="text-danger">Food & Produce</th>
                                          <th class="text-success">Transport</th>
                                          <th class="text-danger">Indoor Air Quality</th>
                                          <th class="text-danger">Pest Control</th>
                                          <th class="text-danger">Social Needs</th>
                                          <th class="text-danger">Home Modification</th>

                                        </tr>
                                      </thead>
                                      <tbody>
                                        <tr>
                                          <td class="text-dark font-weight-bold">Eligibility</th>
                                          <td class="text-success">Yes</th>
                                          <td class="text-danger">No</td>
                                          <td class="text-success">Yes</td>
                                          <td class="text-danger">No</td>
                                          <td class="text-danger">No</td>
                                          <td class="text-danger">No</td>
                                          <td class="text-danger">No</td>
                                        </tr>
                                        <tr>
                                            <td class="text-dark font-weight-bold">CBO</th>
                                            <td><e><a href="#" class="text-success" data-toggle="modal" data-target="#foodModal" onclick="javascript:notification()">Assign CBO</a></e></td>
                                            <td><d><a href="#" class="text-danger">N/A</a></d></td>
                                            <td><f><a href="#" class="text-success" data-toggle="modal" data-target="#transportModal" onclick="javascript:notification()">Assign CBO</a></f></td>
                                            <td><d><a href="#" class="text-danger">N/A</a></d></td>
                                            <td><d><a href="#" class="text-danger">N/A</a></d></td>
                                            <td><d><a href="#" class="text-danger">N/A</a></d></td>
                                            <td><d><a href="#" class="text-danger">N/A</a></d></td>
                                          </tr>
                                        
                                      </tbody>
                                    </table>
                              </div>

                              <div class="modal fade" id="foodModal" tabindex="-1" role="dialog" aria-labelledby="foodModalLabel" aria-hidden="true">
                                  <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-body">
                                            <div class="container-fluid">
                                                <table class="table">
                                                    <thead>
                                                      <tr>
                                                        <th scope="col" class="text-info">ASSIGN MEAL CBO FROM LIST</th>
                                                      </tr>
                                                    </thead>
                                                    <tbody>
                                                      <tr>
                                                        <th scope="row"><button class="btn btn-link" onclick="javascript:assignCBO('Food Pantries for the Capital District','e')">Food Pantries for the Capital District</button></th>
                                                      </tr>
                                                      <tr>
                                                        <th scope="row"><button class="btn btn-link" onclick="javascript:assignCBO('Schenectady Inner City Ministry','e')">Schenectady Inner City Ministry</button></th>
                                                      </tr>
                                                      <tr>
                                                        <th scope="row"><button class="btn btn-link" onclick="javascript:assignCBO('St. Clements Soup Kitchen & Food Pantry','e')">St. Clements Soup Kitchen & Food Pantry</button></th>
                                                      </tr>
                                                      <tr>
                                                          <th scope="row"><button class="btn btn-link" onclick="javascript:assignCBO('Assign CBO','e')">Remove Assignment</button></th>
                                                      </tr>
                                                    </tbody>
                                                  </table>
                                            </div>
                                          </div>
                                          <div class="modal-footer">
                                              <button type="button" class="btn btn-secondary d-none" data-dismiss="modal" id="mealModelClose">Close</button>
                                          </div>
                                  </div>
                                </div>
                            </div>
                            <div class="modal fade" id="transportModal" tabindex="-1" role="dialog" aria-labelledby="transportModalLabel" aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                  <div class="modal-content">
                                      <div class="modal-body">
                                          <div class="container-fluid">
                                              <table class="table">
                                                  <thead>
                                                    <tr>
                                                      <th scope="col" class="text-dark">ASSIGN TRANSPORT CBO FROM LIST</th>
                                                    </tr>
                                                  </thead>
                                                  <tbody>
                                                    <tr>
                                                        <th scope="row"><button class="btn btn-link" onclick="javascript:assignCBO('CDTA ACCESS','f')">CDTA ACCESS</th></button>
                                                    </tr>
                                                    <tr>
                                                      <th scope="row"><button class="btn btn-link" onclick="javascript:assignCBO('Catholic Charities Senior & Caregiver','f')">Catholic Charities Senior & Caregiver</th></button>
                                                    </tr>
                                                    <tr>
                                                      <th scope="row"><button class="btn btn-link" onclick="javascript:assignCBO('Ny Connects Rennselaer','f')">Ny Connects Rennselaer</th></button>
                                                    </tr>
                                                    <tr class="replace">
                                                    </tr>
                                                  </tbody>
                                                </table>
                                          </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary d-none" data-dismiss="modal" id="transportModelClose">Close</button>
                                        </div>
                                </div>
                              </div>
                          </div>
                       </div>
                          </div> 
                        <div class="tab-pane fade container" id="v-pills-messages" role="tabpanel" aria-labelledby="v-pills-messages-tab">
                            
                                <form>
                                      <div class="input-group mb-3 col-6 offset-md-2">
                                          <div class="input-group-prepend">
                                            <label class="input-group-text" for="inputGroupSelect01">Choose Benefit</label>
                                          </div>
                                          <select class="custom-select" id="creditType" onchange="javascript:showCredits()">
                                            <option selected>Choose...</option>
                                            <option value="meal">Meals</option>
                                            <option value="food">Food & Produce</option>
                                            <option value="transport">Transportation</option>
                                            <option value="pest">Pest Control</option>
                                            <option value="indoor">Indoor Air Quality</option>
                                            <option value="social">Social Needs</option>
                                            <option value="home">Home Modification</option>
                                          </select>
                                        </div>
                                        <div class="form-group row pt-5 offset-md-2">
                                          <label for="colFormLabelLg" class="col-sm-3 col-form-label col-form-label-md text-secondary">STARTING CREDITS</label>
                                          <div class="col-sm-3">
                                            <input  class="form-control form-control-lg" id="startCredit" >
                                          </div>
                                        </div>
                                        <div class="form-group row offset-md-2">
                                                <label for="colFormLabelLg" class="col-sm-3 col-form-label col-form-label-md text-secondary">CREDITS USED</label>
                                                <div class="col-sm-3">
                                                  <input class="form-control form-control-lg" id="usedCredit">
                                                </div>
                                        </div>
                                        <div class="form-group row offset-md-2">
                                                <label for="colFormLabelLg" class="col-sm-3 col-form-label col-form-label-md text-secondary">CREDIT BALANCE</label>
                                                <div class="col-sm-3">
                                                  <input  class="form-control form-control-lg" id="balanceCredit" >
                                                </div>
                                        </div>
                                      </form>
                        </div>
                        <div class="tab-pane fade" id="v-pills-settings" role="tabpanel" aria-labelledby="v-pills-settings-tab">
                            
                            <div class="input-group mb-3 col-6 offset-md-2">
                                <div class="input-group-prepend">
                                  <label class="input-group-text" for="inputGroupSelect01">Choose Benefit</label>
                                </div>
                                <select class="custom-select" id="inputGroupSelect01">
                                  <option selected>Transportation</option>
                                </select>
                              </div>

                            <table class="table">
                                <thead>
                                  <tr>
                                    <th scope="col">Date</th>
                                    <th scope="col">From</th>
                                    <th scope="col">To</th>
                                    <th scope="col">Trip Type</th>
                                    <th scope="col">Purpose</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr>
                                    <th scope="row">8/1/2019</th>
                                    <td>Home</td>
                                    <td>PCP Office</td>
                                    <td>Round</td>
                                    <td>Annual Check up</td>
                                  </tr>
                                  <tr>
                                    <th scope="row">6/7/2019</th>
                                    <td>Home</td>
                                    <td>Grocer</td>
                                    <td>Round</td>
                                    <td>Grocery pick up</td>
                                  </tr>
                                  <tr>
                                    <th scope="row">3/5/2019</th>
                                    <td>Home</td>
                                    <td>PCP Office</td>
                                    <td>Round</td>
                                    <td>Grocery pick up</td>
                                  </tr>
                                  <tr>
                                      <th scope="row">3/2/2019</th>
                                      <td>Home</td>
                                      <td>Walgreens</td>
                                      <td>Round</td>
                                      <td>Meds Pick up</td>
                                    </tr>
                                  <tr>
                                      <th scope="row">2/1/2019</th>
                                      <td>Home</td>
                                      <td>Cardiologist</td>
                                      <td>Round</td>
                                      <td>Sick visit</td>
                                  </tr>
                                </tbody>
                              </table>
                        
                        </div>
                        <div class="tab-pane fade" id="v-pills-cbo" role="tabpanel" aria-labelledby="v-pills-cbo-tab">
                            
                            <button type="button" class="btn btn-warning offset-md-4" onclick="location.href='samepageSurvey.html';">Take Survey </button>
                               
                        </div>
                      </div>
                    </div>
            </div>
    </div>
 </body>
 <script>
    $('#creditType').val('meal');
    showCredits();
    if($.cookie('actionTransportNotify')===undefined || $.cookie('actionTransportNotify')== "remove" || $.cookie('actionTransportNotify')== "removed" ){ 
    }else{
     var name= $.cookie('actionTransportName');
     var value= "<th scope=\"row\"><button class=\"btn btn-link\" onclick=\"javascript:assignCBO('Assign CBO','f')\">Remove Assignment</button></th>";
      $(".replace").append(value);
      $("f").html("<a href=\"#\" class=\"text-success\" data-toggle=\"modal\" data-target=\"#transportModal\" onclick=\"javascript:notification()\">"+name+"</a>");
    }
    </script>
</html>